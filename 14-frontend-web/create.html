<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Novo Contato</title>
    <style>
      * {
        font-family: sans-serif;
        font-size: 14pt;
      }
      label {
        display: block;
        margin-top: 1em;
      }
    </style>
  </head>
  <body>
    <form>
      <label for="nome">Nome:</label>
      <input type="text" id="nome" name="nome"
        size="50" maxlength="50" required autofocus>
      <label for="telefone">Telefone:</label>
      <input type="tel" id="telefone" name="telefone"
        size="15" maxlength="15">
      <label for="email">E-mail:</label>
      <input type="email" id="email" name="email"
        size="50" maxlength="100">
      <br><br>
      <input type="submit" value="Salvar" />
    </form>

    <script>
    // detectar a submissão do formulário
    document.forms[0].addEventListener('submit', create);
    // função que cria um objeto contato e submete
    function create(e) {
      // objeto contato
      let o = {
        nome: this.nome.value,
        telefone: this.telefone.value,
        email: this.email.value
      };
      // equivalente ao System.out.println
      console.log(o);
      // ajax para enviar o json para o servidor
      let ajax = new XMLHttpRequest();
      ajax.open('POST', 'http://localhost:4567/contato');
      ajax.send(JSON.stringify(o));
      // não propagar o evento
      e.preventDefault();
    }
    </script>
















  </body>
</html>
